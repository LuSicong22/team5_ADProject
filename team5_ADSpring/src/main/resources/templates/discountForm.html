<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><title>Discount Form</title></head>
<head th:insert="layout/layout.html :: veryTop"></head>
 <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/css/bootstrap-datepicker3.standalone.min.css"> -->
<body>
<div th:replace="layout/layout.html :: menu" ></div>
<br/>
	<h3>Set Discount for <span th:text="${name}"></span></h3><br/>
	<form action="#" th:object="${discount}" th:action="@{/discount/save}" method="get" id="form">
	<div id="datepicker-container">
		<table  class="table table-borderless">
			<tr>
				<td>
					<input type="hidden" th:field="*{id}">
				</td>				
			</tr>
			<tr>			
				<td><label th:text="${name}"></label></td>
				<td th:if="${not #lists.isEmpty(hotel)}" >
					<!-- <span th:if="${#lists.size(hotel) == 1} ">
						<span th:each="hotel : ${hotel}">
							<span th:text="${hotel.name}" th:field="${hotel}"> Name </span>
						</span>
					</span> -->
					<!-- <span th:unless="${#lists.size(hotel) == 1} "> -->
						<select class="form-control" name="id" id="id" th:field="*{hotel}">
                    		<option th:each="hotel : ${hotel}" th:value="${hotel.id}" th:text="${hotel.name}"></option>
                    	</select>
					<!-- </span>	 -->				
			    </td>
			    <td th:if="${not #lists.isEmpty(attraction)}">
			    	<!-- <div th:if="${#lists.size(attraction) == 1} ">
						<span th:each="attraction : ${attraction}">
							<span th:text="${attraction.name}"> Name </span>
						</span>
					</div> -->
			    	<!-- <div th:unless="${#lists.size(attraction) == 1} "> -->
						<select class="form-control" name="id" id="id" th:field="*{attraction}">
	                    	<option th:each="attraction : ${attraction}" th:value="${attraction.id}" th:text="${attraction.name}"></option>
	                    </select>
                    <!-- </div> -->
                    
			    </td>
			</tr>
			<tr>
			
				<td>Date</td>
				<td>
					<input class="form-control datepicker" type="date"  th:field="*{from_date}" name="from_date" id="from_date">
					<p th:if="${#fields.hasErrors('from_date')}" th:errors="*{from_date}"></p>
				</td>
				<td>
					<input class="form-control datepicker" type="date" name="to_date" id="to_date" th:field="*{to_date}">
					<p th:if="${#fields.hasErrors('to_date')}" th:errors="*{to_date}"></p>
				</td>
			
			</tr>
			<tr>
				<td>Discount</td>
				<td ><input class="form-control" th:field="*{discount_rate}" type="text">
				<p th:if="${#fields.hasErrors('discount_rate')}" th:errors="*{discount_rate}"></p>
				</td>
			</tr>
			<tr>
				<td colspan="3"><button class="btn btn-primary" type="submit">Apply</button></td>
			</tr>
		</table>
		</div>
	</form>
<div th:replace="layout/layout.html :: footer"></div>
<div th:replace="layout/layout.html :: javascript"></div>
</body>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/js/bootstrap-datepicker.min.js"></script> -->
     <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
<!-- <script  type="text/javascript" th:inline="javascript">
/*<![CDATA[*/
	
	var discount = "[[${discount.discount_rate}]]";
	
	console.log(discount);
	 //discount.from_date = $('#from_date').val();
	var today = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
	$('#from_date').datepicker({
	    uiLibrary: 'bootstrap4',
	    iconsLibrary: 'fontawesome',
	    minDate: today,
	    maxDate: function () {
	        return $('#to_date').val();
	    }    
	});
	console.log("From Date: ");
	console.log($('#from_date').val());
	
	 $("#from_date").change(function() {
		 var fromDate = new Date($('#from_date').val());
         var date = new Date(fromDate).toDateString("yyyy-MM-dd");
        
        /*  $.get( "/discount/fromDate?fromDate=" + fromDate , function( data ) {
         	console.log('Success');
         });    */    
         
         
         
         console.log("[[${discount.from_date}]]");
         console.log($('#from_date').val());
	    });
	 $("#to_date").change(function() {
	    	console.log("Date changed:" + $('#to_date').val());
	    });
	/* "[[${discount.from_date}]]" = $('#from_date').val() */
	$('#to_date').datepicker({
	    uiLibrary: 'bootstrap4',
	    //format: 'yyyy-MM-dd',
	    iconsLibrary: 'fontawesome',
	    minDate: function () {
	        return $('#from_date').val();
	    }
	});
/*]]>*/
</script> -->
</html>

        